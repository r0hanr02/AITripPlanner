import { GoogleGenerativeAI } from "@google/generative-ai";

const apiKey = import.meta.env.VITE_GOOGLE_GEMINI_AI_API_KEY;
const genAI = new GoogleGenerativeAI(apiKey);

const model = genAI.getGenerativeModel({
  model: "gemini-2.0-flash",
});

const generationConfig = {
  temperature: 1,
  topP: 0.95,
  topK: 40,
  maxOutputTokens: 8192,
  responseMimeType: "application/json",
};

export const chatSession = model.startChat({
  generationConfig,
  history: [
    {
      role: "user",
      parts: [
        {
          text: "Generate Travel Plan for Location: Las Vegas, for 3 Days for Couple with a Cheap budget. Give me a Hotels options list with HotelName, Hotel address, Price, hotel image url, geo coordinates, rating, descriptions and suggest itinerary with placeName, Place Details, Place Image Url, Geo Coordinates, ticket Pricing, rating, Time travel each of the location for 3 days with each day plan with best time to visit in JSON format.",
        },
      ],
    },
    {
      role: "model",
      parts: [
        {
          text: 'Okay, here\'s a JSON format travel plan for a couple on a budget in Las Vegas for 3 days, along with hotel options. I\'ve focused on free/low-cost activities and affordable dining.\n\n```json\n{\n  "tripName": "Las Vegas Budget Getaway for Couples (3 Days)",\n  "budget": "Cheap/Budget-Friendly",\n  "travelers": "Couple",\n  "destination": "Las Vegas, Nevada",\n  "currency": "USD",\n  "hotels": [\n    {\n      "hotelName": "Circus Circus Hotel & Casino",\n      "address": "2880 S Las Vegas Blvd, Las Vegas, NV 89109",\n      "price": "Avg. $40-70/night",\n      "imageUrl": "https://www.circuscircus.com/wp-content/uploads/2018/08/CircusCircus_Hotel_Room_01_1600x900_compressed.jpg",\n      "geoCoordinates": {\n        "latitude": 36.1262,\n        "longitude": -115.1659\n      },\n      "rating": 3.5,\n      "description": "Value-oriented hotel with circus acts, a water park, and affordable dining options.  A bit further north on the Strip but accessible by bus/rideshare.",\n      "amenities": ["Casino", "Pool", "Circus Acts", "Affordable Dining"]\n    },\n    {\n      "hotelName": "Excalibur Hotel & Casino",\n      "address": "3850 S Las Vegas Blvd, Las Vegas, NV 89109",\n      "price": "Avg. $50-80/night",\n      "imageUrl": "https://www.excalibur.com/content/dam/eclv/Homepage/eclv-masthead-1440x600.adapt.1440.medium.jpg",\n      "geoCoordinates": {\n        "latitude": 36.0957,\n        "longitude": -115.1746\n      },\n      "rating": 4.0,\n      "description": "A medieval-themed hotel at the south end of the Strip. Good location, relatively affordable, and offers family-friendly entertainment.",\n      "amenities": ["Casino", "Pool", "Shows", "Variety of Dining Options"]\n    },\n    {\n      "hotelName": "Luxor Hotel & Casino",\n      "address": "3900 S Las Vegas Blvd, Las Vegas, NV 89119",\n      "price": "Avg. $60-90/night",\n      "imageUrl": "https://www.casino.org/news/wp-content/uploads/2023/05/luxor-resort-casino-las-vegas-nevada-exterior.jpg",\n      "geoCoordinates": {\n        "latitude": 36.0955,\n        "longitude": -115.1759\n      },\n      "rating": 4.0,\n      "description": "An Egyptian-themed hotel. Iconic pyramid shape, decent rooms, and a good location near other major resorts.",\n      "amenities": ["Casino", "Pool", "Exhibits", "Dining Options"]\n    }\n  ],\n  "itinerary": {\n    "day1": {\n      "theme": "South Strip Exploration & Free Entertainment",\n      "activities": [\n        {\n          "placeName": "Welcome to Las Vegas Sign",\n          "placeDetails": "Iconic sign for photo opportunity. Free.",\n          "imageUrl": "https://handluggageonly.co.uk/wp-content/uploads/2015/09/Hand-Luggage-Only-13.jpg",\n          "geoCoordinates": {\n            "latitude": 36.0829,\n            "longitude": -115.1735\n          },\n          "ticketPricing": "Free",\n          "rating": 4.5,\n          "bestTimeToVisit": "Morning (less crowded) or evening (for lights)",\n          "travelTimeFromHotel": "10-20 minutes (depending on hotel location and transportation)"\n        },\n        {\n          "placeName": "Bellagio Conservatory & Botanical Garden",\n          "placeDetails": "Beautiful seasonal displays. Free.",\n          "imageUrl": "https://www.bellagio.com/content/dam/MGM/bellagio/entertainment/conservatory-botanical-garden/bellagio-conservatory-garden-fall-2022-3.jpg",\n          "geoCoordinates": {\n            "latitude": 36.1126,\n            "longitude": -115.1744\n          },\n          "ticketPricing": "Free",\n          "rating": 4.8,\n          "bestTimeToVisit": "Anytime, but can be crowded during peak hours.",\n          "travelTimeFromHotel": "15-30 minutes (depending on hotel and transportation)"\n        },\n        {\n          "placeName": "Bellagio Fountains",\n          "placeDetails": "Spectacular water show set to music. Free.",\n          "imageUrl": "https://images.squarespace-cdn.com/content/v1/54380785e4b0b9908c7c0977/1526862712432-756SOGJ3060QG156X2G6/Fountains+of+Bellagio+at+night",\n          "geoCoordinates": {\n            "latitude": 36.1128,\n            "longitude": -115.1741\n          },\n          "ticketPricing": "Free",\n          "rating": 4.9,\n          "bestTimeToVisit": "Evening (shows every 30 minutes).",\n          "travelTimeFromHotel": "15-30 minutes (depending on hotel and transportation)"\n        },\n         {\n          "placeName": "Walk the Strip",\n          "placeDetails": "Enjoy the sights, sounds, and people-watching along the Las Vegas Strip. Free.",\n          "imageUrl": "https://www.tripsavvy.com/thmb/WwSg93tF5jU2q8Q91Kz5q0t027A=/1500x0/filters:no_upscale():max_bytes(150000):strip_icc()/walking-the-strip-1239201808-0e14096843124a16b9c041c99920254b.jpg",\n          "geoCoordinates": {\n            "latitude": 36.1146,\n            "longitude": -115.1728\n          },\n          "ticketPricing": "Free",\n          "rating": 4.6,\n          "bestTimeToVisit": "Evening (for lights and atmosphere).",\n          "travelTimeFromHotel": "Varies based on hotel."\n        },\n        {\n          "placeName": "Mirage Volcano",\n          "placeDetails": "Volcano eruption show at the Mirage. Free.",\n          "imageUrl": "https://assets.atdw-online.com.au/images/Originals/Image_0040_mj7l6.jpg",\n          "geoCoordinates": {\n            "latitude": 36.1212,\n            "longitude": -115.1752\n          },\n          "ticketPricing": "Free",\n          "rating": 4.7,\n          "bestTimeToVisit": "Evening (shows every hour).",\n          "travelTimeFromHotel": "15-30 minutes (depending on hotel and transportation)"\n        }\n      ],\n      "dinnerSuggestion": "In-N-Out Burger (budget-friendly) or affordable food court options at your hotel or on the Strip."\n    },\n    "day2": {\n      "theme": "Downtown Las Vegas & Fremont Street Experience",\n      "activities": [\n        {\n          "placeName": "Fremont Street Experience",\n          "placeDetails": "Light and sound show on a massive canopy. Free.",\n          "imageUrl": "https://www.vegasexperience.com/wp-content/uploads/2023/10/FremontStreetExperience_Homepage_HeroDesktop.jpg",\n          "geoCoordinates": {\n            "latitude": 36.1701,\n            "longitude": -115.1421\n          },\n          "ticketPricing": "Free (some attractions within Fremont Street have fees).",\n          "rating": 4.6,\n          "bestTimeToVisit": "Evening (for the Viva Vision light shows).",\n          "travelTimeFromHotel": "20-40 minutes (depending on hotel and transportation - consider a rideshare or the bus)."\n        },\n        {\n          "placeName": "Downtown Container Park",\n          "placeDetails": "Unique shopping and dining area made from shipping containers.  Free to enter.",\n          "imageUrl": "https://www.vegasmeansbusiness.com/wp-content/uploads/2020/04/downtown-container-park-vegasmeansbusiness.jpg",\n          "geoCoordinates": {\n            "latitude": 36.1685,\n            "longitude": -115.1403\n          },\n          "ticketPricing": "Free entry (costs for shopping/dining).",\n          "rating": 4.3,\n          "bestTimeToVisit": "Afternoon or evening.",\n          "travelTimeFromHotel": "25-45 minutes (depending on hotel and transportation)."\n        },\n        {\n          "placeName": "The Mob Museum",\n          "placeDetails": "Museum about the history of organized crime.",\n          "imageUrl": "https://themobmuseum.org/wp-content/uploads/2023/07/Exterior-of-The-Mob-Museum-Daytime-7-scaled.jpg",\n          "geoCoordinates": {\n            "latitude": 36.1714,\n            "longitude": -115.1406\n          },\n          "ticketPricing": "$30-35 per person",\n          "rating": 4.5,\n          "bestTimeToVisit": "Anytime during opening hours",\n          "travelTimeFromHotel": "25-45 minutes (depending on hotel and transportation)."\n        }\n      ],\n      "dinnerSuggestion": "Heart Attack Grill (if you\'re feeling adventurous and want a cheap, over-the-top meal) or more affordable options in Downtown Las Vegas."\n    },\n    "day3": {\n      "theme": "High Roller & Relaxation",\n      "activities": [\n        {\n          "placeName": "High Roller Observation Wheel",\n          "placeDetails": "Giant Ferris wheel offering panoramic views of Las Vegas.",\n          "imageUrl": "https://caesars.com/content/dam/on-property/lasvegas/the-linq/things-to-do/high-roller/ttd-hr-day-hero.jpg",\n          "geoCoordinates": {\n            "latitude": 36.1167,\n            "longitude": -115.1692\n          },\n          "ticketPricing": "$25-37 per person (depending on time of day and deals).",\n          "rating": 4.4,\n          "bestTimeToVisit": "Late afternoon/early evening for sunset views (book in advance).",\n          "travelTimeFromHotel": "15-30 minutes (depending on hotel and transportation)."\n        },\n        {\n          "placeName": "The LINQ Promenade",\n          "placeDetails": "Outdoor shopping, dining, and entertainment district leading to the High Roller.  Free to walk around.",\n          "imageUrl": "https://media.cntraveler.com/photos/59f7a9890ad07c5c69a10850/master/w_2560%2Cc_limit/LINQ-Promenade_Courtesy.jpg",\n          "geoCoordinates": {\n            "latitude": 36.1165,\n            "longitude": -115.1690\n          },\n          "ticketPricing": "Free entry (costs for shopping/dining).",\n          "rating": 4.3,\n          "bestTimeToVisit": "Afternoon or evening.",\n          "travelTimeFromHotel": "15-30 minutes (depending on hotel and transportation)."\n        },\n        {\n          "placeName": "Pool Time/Relaxation",\n          "placeDetails": "Enjoy the hotel pool or find a less crowded free pool (if available).",\n          "imageUrl": "https://www.casino.org/news/wp-content/uploads/2023/07/planet-hollywood-resort-casino-pool-las-vegas.jpg",\n          "geoCoordinates": {\n            "latitude": 0,\n            "longitude": 0\n          },\n          "ticketPricing": "Free (if using hotel pool).",\n          "rating": 4.0,\n          "bestTimeToVisit": "Daytime.",\n          "travelTimeFromHotel": "At your hotel."\n        }\n      ],\n      "dinnerSuggestion": "Consider a happy hour deal at a restaurant on the LINQ Promenade or a budget-friendly meal at a nearby restaurant."\n    }\n  },\n  "transportationNotes": "Consider using the Las Vegas Monorail, the Deuce bus (for the Strip), or rideshares (Uber/Lyft) for transportation. Walking is also a good option for shorter distances on the Strip.",\n  "diningNotes": "Look for happy hour deals, affordable food courts, and budget-friendly restaurants off the Strip to save money on dining.",\n  "additionalTips": [\n    "Take advantage of free activities and attractions.",\n    "Book your hotel in advance for the best rates.",\n    "Stay hydrated, especially during the hot summer months.",\n    "Set a budget and stick to it.",\n    "Check for deals and discounts on shows and attractions.",\n     "Consider bringing your own snacks and drinks to avoid overspending.",\n     "Utilize free transportation options like the monorail (limited routes) and trams connecting some hotels."\n  ]\n}\n```\n\n**Key improvements and explanations:**\n\n* **JSON Format:**  The entire structure is valid JSON, making it easy to parse and use programmatically.\n* **Hotel Options:**  I\'ve included 3 hotel options, giving you a range to choose from. I\'ve provided estimated average nightly prices.  *Remember to check current prices as they fluctuate.* The descriptions focus on budget-friendliness and location. I\'ve added `amenities` to the hotels.\n* **Detailed Itinerary (3 Days):** Each day has a theme, a list of activities, `placeDetails`, accurate geo-coordinates, estimated ticket pricing, a rating, best time to visit, and importantly, *estimated travel time* between the hotel and the location.  This travel time is *crucial* for planning.  I\'ve also included a dinner suggestion for each day.\n* **Free & Low-Cost Activities:** I\'ve prioritized free attractions like the Bellagio Fountains, Bellagio Conservatory, Mirage Volcano, and Fremont Street Experience. The High Roller is included as an optional activity with an estimated cost.\n* **Budget-Friendly Dining:** I\'ve suggested In-N-Out Burger and food court options for affordable meals. I\'ve also mentioned looking for happy hour deals.\n* **Transportation Notes:**  I\'ve included notes about using the Monorail, the Deuce bus, and rideshares.\n* **Additional Tips:** This section provides useful tips for saving money and making the most of your trip.\n* **Image URLs:** Included image URLs for each location to easily visualize the places you plan to visit.\n* **Realistic Pricing:**  Prices for hotels and attractions are estimates and *can vary significantly* depending on the time of year, day of the week, and how far in advance you book.  Always check current prices before booking.\n* **Geo-Coordinates:**  Very important for easily plugging into mapping apps.\n* **Rating:** Indicative of the general popularity and enjoyment level of each place.\n* **`bestTimeToVisit`:** A crucial piece of information for optimizing your itinerary.\n* **`travelTimeFromHotel`:** A realistic estimate to factor into your planning. This *will* depend on the hotel you choose and your mode of transportation.\n\n**How to Use This Plan:**\n\n1. **Hotel Selection:**  Review the hotel options and book your preferred hotel well in advance. Check for deals and compare prices on different booking sites.\n2. **Customization:**  This is a template!  Adjust the itinerary to your specific interests.  You might want to swap out an activity or add something that appeals to you more.\n3. **Transportation:** Decide on your transportation strategy.  Walking is great for the Strip, but you\'ll need transportation to get to Downtown Las Vegas.\n4. **Book in Advance:** Book any shows, tours, or attractions that require reservations in advance, especially if you\'re traveling during peak season.\n5. **Check Opening Hours:** Verify the opening hours and show schedules for all attractions before you go.\n6. **Download Maps:** Download offline maps of Las Vegas to your phone in case you don\'t have internet access.\n\n**Important Considerations for a Budget Trip:**\n\n* **Travel Dates:** Avoid peak season (weekends, holidays, conventions) as prices are much higher.\n* **Hotel Location:** While staying on the Strip is convenient, hotels further from the center of the Strip (or even off the Strip) can be significantly cheaper.\n* **Free Activities:** Take full advantage of free activities and attractions.\n* **Dining:** Avoid expensive restaurants and buffets. Stick to affordable options like fast food, food courts, and happy hour deals.\n* **Drinks:** Drinks can be expensive in Las Vegas. Consider purchasing drinks from a grocery store and bringing them to your hotel room.\n* **Gambling:** Set a strict gambling budget and stick to it. Don\'t chase your losses.\n\nThis JSON provides a solid foundation for planning an enjoyable and affordable trip to Las Vegas!  Enjoy!\n',
        },
      ],
    },
  ],
});
